[gd_scene format=3 uid="uid://tyqfqa6lqeoo"]

[ext_resource type="PackedScene" uid="uid://eoyrkfeb6fl4" path="res://scenes/bubble_shader.tscn" id="1_hh5oj"]
[ext_resource type="Shader" uid="uid://xt2jid722gi3" path="res://shaders/wave.gdshader" id="1_pvqg0"]
[ext_resource type="Texture2D" uid="uid://d0285k5iabi3g" path="res://icon.svg" id="2_baglu"]
[ext_resource type="Script" uid="uid://b8dg2daw424cb" path="res://scripts/background.gd" id="2_hh5oj"]
[ext_resource type="Texture2D" uid="uid://b6e21y341pn1x" path="res://IMGS/day.jpg" id="2_vqfsp"]
[ext_resource type="PackedScene" uid="uid://bk8vlqanbro6t" path="res://scenes/oxygen_tank.tscn" id="3_t45w4"]
[ext_resource type="PackedScene" uid="uid://652fn3xh6jt7" path="res://scenes/player.tscn" id="4_h5ip5"]
[ext_resource type="Texture2D" uid="uid://bnnqc3a1e87xw" path="res://textpng.png" id="4_jn13j"]
[ext_resource type="PackedScene" uid="uid://qiulhnrb1h2f" path="res://scenes/fish_spawner.tscn" id="7_hh5oj"]
[ext_resource type="Texture2D" uid="uid://n4shwtgxjcgo" path="res://IMGS/island.png" id="8_i6jx3"]
[ext_resource type="Script" uid="uid://bnhodst1lsw4l" path="res://scripts/adam.gd" id="9_dmaw2"]
[ext_resource type="Texture2D" uid="uid://bcmhr181vs24h" path="res://IMGS/pipe.png" id="12_dmaw2"]
[ext_resource type="AudioStream" uid="uid://d0qn18na686an" path="res://sounds/bubbles.mp3" id="13_1xxg6"]
[ext_resource type="PackedScene" uid="uid://buxh6wc56mupk" path="res://scenes/chest.tscn" id="14_517kj"]

[sub_resource type="GDScript" id="GDScript_jn13j"]
script/source = "extends Node2D

# List your background images
var backgrounds = [
	preload(\"res://IMGS/day.jpg\"),
	preload(\"res://IMGS/eve.jpg\"),
	preload(\"res://IMGS/nigg.jpg\"),
	preload(\"res://IMGS/mor.jpeg\")
]

@export var transition_time := 1.5
var index := 0
var showing_a := true  # which TextureRect is currently visible

func _ready():
	$Background.texture = backgrounds[index]
	$Background.modulate.a = 1.0
	$Backgg.modulate.a = 0.0
	$Background/Timer.timeout.connect(_on_timer_timeout)

func _on_timer_timeout():
	# move to the next image in order
	index = (index + 1) % backgrounds.size()

	# pick which TextureRect fades in/out
	var fade_in = $Backgg if showing_a else $Background
	var fade_out = $Background if showing_a else $Backgg

	# assign next texture to fade_in
	fade_in.texture = backgrounds[index]
	fade_in.modulate.a = 0.0

	# create tween: fade out old, fade in new simultaneously
	var tween = create_tween()
	tween.tween_property(fade_out, \"modulate:a\", 0.0, transition_time)
	tween.parallel().tween_property(fade_in, \"modulate:a\", 1.0, transition_time)

	# toggle which TextureRect is active
	showing_a = !showing_a
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_baglu"]
size = Vector2(1147, 20)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_t45w4"]
shader = ExtResource("1_pvqg0")
shader_parameter/liquid_level = 0.5
shader_parameter/liquid_color = Color(0.2, 0.5, 1, 0.8)
shader_parameter/foam_color = Color(0.8, 0.9, 1, 0.6)
shader_parameter/wave_amplitude = 0.02
shader_parameter/wave_frequency = 5.0
shader_parameter/wave_speed = 2.0
shader_parameter/gravity_angle = 0.0
shader_parameter/foam_thickness = 0.02
shader_parameter/shine_intensity = 0.3
shader_parameter/add_bubble = true
shader_parameter/bubble_scale = 10.0
shader_parameter/bubble_speed = 0.5
shader_parameter/pixel_size = 128.0

[node name="Game" type="Node2D" unique_id=2036010790]
script = SubResource("GDScript_jn13j")

[node name="Bubbles" parent="." unique_id=1348635199 instance=ExtResource("1_hh5oj")]
visible = false

[node name="Backgg" type="TextureRect" parent="." unique_id=243166322]
offset_right = 1152.0
offset_bottom = 648.0
expand_mode = 1
metadata/_edit_use_anchors_ = true

[node name="Background" type="TextureRect" parent="." unique_id=1107784584]
offset_right = 1152.0
offset_bottom = 648.0
texture = ExtResource("2_vqfsp")
expand_mode = 1
script = ExtResource("2_hh5oj")
metadata/_edit_use_anchors_ = true

[node name="Timer" type="Timer" parent="Background" unique_id=1897685357]
wait_time = 120.0
autostart = true

[node name="Underwater_Text" type="TextureRect" parent="." unique_id=1679685836]
visible = false
texture_filter = 1
offset_left = 288.0
offset_top = 66.0
offset_right = 909.8348
offset_bottom = 263.0
texture = ExtResource("4_jn13j")

[node name="Area2D" type="Area2D" parent="." unique_id=424514134]
position = Vector2(0, 229)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D" unique_id=350195099]
position = Vector2(576.5, 372)
shape = SubResource("RectangleShape2D_baglu")
debug_color = Color(0.34523618, 0.48514348, 1, 0.41960785)

[node name="Sprite2D" type="Sprite2D" parent="Area2D" unique_id=1617016785]
material = SubResource("ShaderMaterial_t45w4")
position = Vector2(575.5, 354)
scale = Vector2(8.9921875, 1)
texture = ExtResource("2_baglu")

[node name="NiggAdam" parent="." unique_id=1636654684 instance=ExtResource("4_h5ip5")]
position = Vector2(668, 429)
script = ExtResource("9_dmaw2")

[node name="Island" type="StaticBody2D" parent="." unique_id=2020899278]
position = Vector2(129, 110)

[node name="Sprite2D" type="Sprite2D" parent="Island" unique_id=602292386]
position = Vector2(685, 346.00003)
scale = Vector2(0.6227022, 0.6128837)
texture = ExtResource("8_i6jx3")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Island" unique_id=1377206949]
visible = false
polygon = PackedVector2Array(458, 535, 349, 486, 423, 468, 471, 444, 487, 418, 512, 405, 526, 388, 543, 361, 594, 338, 624, 335, 683, 317, 706, 312, 896, 320, 1022, 350, 1022, 384, 1022, 534)

[node name="oxygen_tank" parent="." unique_id=1640028717 instance=ExtResource("3_t45w4")]
position = Vector2(749, 385)

[node name="fish_spawner" parent="." unique_id=570606193 instance=ExtResource("7_hh5oj")]
position = Vector2(88, 163)

[node name="PinJoint2D" type="PinJoint2D" parent="." unique_id=1907018193]
texture_filter = 1
position = Vector2(749, 385)
node_a = NodePath("../NiggAdam")
node_b = NodePath("../oxygen_tank")

[node name="Line2D" type="Line2D" parent="PinJoint2D" unique_id=1473377462]
texture_filter = 1
texture_repeat = 2
position = Vector2(0.9999771, -5.000002)
scale = Vector2(0.7452624, 0.6524824)
points = PackedVector2Array(1, 10, -11, 11, -22, 22, -33, 32, -44, 42, -55, 52, -66, 62, -77, 72, -91.24298, 76.63043, -103.319275, 81.22827, -114.05377, 81.22827, -123.44641, 84.29346, -120.76282, 72.03259)
width = 20.0
texture = ExtResource("12_dmaw2")
texture_mode = 1

[node name="BubbleSFX" type="AudioStreamPlayer2D" parent="." unique_id=379561679]
stream = ExtResource("13_1xxg6")

[node name="Chest" parent="." unique_id=1329740356 instance=ExtResource("14_517kj")]
position = Vector2(977, 416)

[connection signal="body_entered" from="Area2D" to="NiggAdam" method="on_enter_water"]
